# üç≥ CookBook-App

·ª®ng d·ª•ng qu·∫£n l√Ω c√¥ng th·ª©c n·∫•u ƒÉn v·ªõi React Native v√† Expo, t√≠ch h·ª£p AI ƒë·ªÉ t·∫°o c√¥ng th·ª©c t·ª± ƒë·ªông.

## üì± T√≠nh nƒÉng ch√≠nh

### üîê B·∫£o m·∫≠t & X√°c th·ª±c

- ‚úÖ ƒêƒÉng k√Ω t√†i kho·∫£n v·ªõi m√£ h√≥a m·∫≠t kh·∫©u (SHA256)
- ‚úÖ ƒêƒÉng nh·∫≠p an to√†n
- ‚úÖ Qu√™n m·∫≠t kh·∫©u & ƒë·∫∑t l·∫°i
- ‚úÖ ƒê·ªïi m·∫≠t kh·∫©u
- ‚úÖ Validation email v√† m·∫≠t kh·∫©u

### üë§ Qu·∫£n l√Ω ng∆∞·ªùi d√πng

- ‚úÖ Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n (t√™n, email)
- ‚úÖ Upload avatar t·ª´ th∆∞ vi·ªán ho·∫∑c camera
- ‚úÖ Profile page v·ªõi UI hi·ªán ƒë·∫°i
- ‚úÖ ƒêƒÉng xu·∫•t an to√†n

### üìö Qu·∫£n l√Ω c√¥ng th·ª©c

- ‚úÖ T·∫°o c√¥ng th·ª©c n·∫•u ƒÉn m·ªõi
- ‚úÖ **Ch·ªânh s·ª≠a c√¥ng th·ª©c** (Edit Recipe) - Sync across all collections
- ‚úÖ **X√≥a c√¥ng th·ª©c v·ªõi confirmation** (Delete Recipe) - Auto cleanup all references
- ‚úÖ Xem chi ti·∫øt c√¥ng th·ª©c v·ªõi **auto-reload** khi c√≥ thay ƒë·ªïi
- ‚úÖ L∆∞u c√¥ng th·ª©c y√™u th√≠ch
- ‚úÖ Xem c√¥ng th·ª©c ƒë√£ t·∫°o v√† ƒë√£ l∆∞u
- ‚úÖ T√¨m ki·∫øm c√¥ng th·ª©c
- ‚úÖ L·ªçc theo danh m·ª•c
- ‚úÖ Long-press menu tr√™n My Recipes (Edit/Delete)
- ‚úÖ **Real-time data synchronization** gi·ªØa c√°c m√†n h√¨nh
- ‚úÖ **Modern UI cho ingredients** - Card layout, text wrap t·ª± ƒë·ªông
- ‚úÖ **üîí Private/Public Recipe System** - Control recipe visibility

### ü§ñ AI Recipe Generator

- ‚úÖ T·∫°o c√¥ng th·ª©c t·ª± ƒë·ªông t·ª´ nguy√™n li·ªáu c√≥ s·∫µn
- ‚úÖ T√≠ch h·ª£p Google Gemini AI
- ‚úÖ T·ª± ƒë·ªông t√¨m h√¨nh ·∫£nh t·ª´ Pexels API
- ‚úÖ T√πy ch·ªânh calories, th·ªùi gian n·∫•u, s·ªë ng∆∞·ªùi ƒÉn

### üé® UI/UX

- ‚úÖ Material Design v·ªõi m√†u s·∫Øc hi·ªán ƒë·∫°i
- ‚úÖ Icons t·ª´ Ionicons
- ‚úÖ Gradient v√† shadow effects
- ‚úÖ Loading states v√† animations
- ‚úÖ Responsive design

## üöÄ C√†i ƒë·∫∑t

### 1. Y√™u c·∫ßu h·ªá th·ªëng

- Node.js >= 16.x
- npm ho·∫∑c yarn
- Expo CLI
- iOS Simulator ho·∫∑c Android Emulator (ho·∫∑c Expo Go app tr√™n ƒëi·ªán tho·∫°i)

### 2. Clone repository

```bash
git clone <repository-url>
cd CookBook-App
```

### 3. C√†i ƒë·∫∑t dependencies

```bash
npm install
```

### 4. C·∫•u h√¨nh API Keys

**QUAN TR·ªåNG:** B·∫°n c·∫ßn c·∫•u h√¨nh c√°c API keys ƒë·ªÉ ·ª©ng d·ª•ng ho·∫°t ƒë·ªông ƒë·∫ßy ƒë·ªß.

T·∫°o file `.env` trong th∆∞ m·ª•c g·ªëc c·ªßa project (file n√†y ƒë√£ c√≥ s·∫µn template):

```env
# API Keys
GEMINI_API_KEY=your_gemini_api_key_here
PEXELS_API_KEY=your_pexels_api_key_here

# API Configuration
API_URL=https://cookbook-app.loca.lt

# App Configuration
APP_NAME=CookBook-App
APP_VERSION=1.0.0

# Security
ENCRYPTION_KEY=cookbook-app-secret-key-2024
```

**C√°ch l·∫•y API Keys:**

1. **Gemini API Key** (cho AI Recipe Generator):

   - Truy c·∫≠p: https://makersuite.google.com/app/apikey
   - ƒêƒÉng nh·∫≠p v·ªõi Google account
   - T·∫°o API key m·ªõi
   - Copy v√† paste v√†o `.env`

2. **Pexels API Key** (cho h√¨nh ·∫£nh c√¥ng th·ª©c):

   - Truy c·∫≠p: https://www.pexels.com/api/
   - ƒêƒÉng k√Ω t√†i kho·∫£n mi·ªÖn ph√≠
   - L·∫•y API key
   - Copy v√† paste v√†o `.env`

**L∆∞u √Ω:** `API_URL` ƒë√£ ƒë∆∞·ª£c c·∫•u h√¨nh s·∫µn v·ªõi localtunnel (`https://cookbook-app.loca.lt`). N·∫øu b·∫°n mu·ªën s·ª≠ d·ª•ng local network, c√≥ th·ªÉ thay ƒë·ªïi trong file `.env`.

### 5. Ch·∫°y JSON Server (Database)

M·ªü terminal m·ªõi v√† ch·∫°y:

```bash
npm run dev
```

L·ªánh n√†y s·∫Ω:

- Ch·∫°y JSON server t·∫°i `http://localhost:9999`
- T·ª± ƒë·ªông t·∫°o tunnel public qua localtunnel: `https://cookbook-app.loca.lt`

**L∆∞u √Ω:** Khi truy c·∫≠p localtunnel l·∫ßn ƒë·∫ßu, b·∫°n c·∫ßn click "Click to Continue" ƒë·ªÉ x√°c th·ª±c.

### 6. Ch·∫°y ·ª©ng d·ª•ng

M·ªü terminal kh√°c v√† ch·∫°y:

```bash
npm start
```

Sau ƒë√≥:

- Nh·∫•n `i` ƒë·ªÉ m·ªü iOS Simulator
- Nh·∫•n `a` ƒë·ªÉ m·ªü Android Emulator
- Qu√©t QR code v·ªõi Expo Go app tr√™n ƒëi·ªán tho·∫°i

## üîí Private/Public Recipe System

H·ªá th·ªëng qu·∫£n l√Ω quy·ªÅn ri√™ng t∆∞ cho recipes, cho ph√©p user ki·ªÉm so√°t recipe n√†o ƒë∆∞·ª£c public.

### How it works:

**üìù Khi t·∫°o recipe:**

- AI-generated recipes ‚Üí T·ª± ƒë·ªông **PRIVATE**
- Manually created recipes ‚Üí T·ª± ƒë·ªông **PRIVATE**
- Ch·ªâ user t·∫°o recipe m·ªõi th·∫•y ƒë∆∞·ª£c

**üåü Publish workflow:**

```
Create Recipe (Private)
  ‚Üí Review & Edit (optional)
  ‚Üí Click "Xu·∫•t b·∫£n c√¥ng th·ª©c" button
  ‚Üí Recipe becomes PUBLIC
  ‚Üí Everyone can see it on HomePage
```

**üé® Visual Indicators:**

- üîí **Private Badge** (Red) - Ch·ªâ user th·∫•y
- ‚úèÔ∏è **Edit Badge** (Blue) - My Recipe
- Recipe kh√¥ng c√≥ badge = Public recipe

**‚ú® Benefits:**

- ‚úÖ Quality control - Review tr∆∞·ªõc khi publish
- ‚úÖ Privacy - Recipe th·ª≠ nghi·ªám kh√¥ng public
- ‚úÖ User control - Quy·∫øt ƒë·ªãnh recipe n√†o x·ª©ng ƒë√°ng share
- ‚úÖ Clean community - Ch·ªâ recipe ch·∫•t l∆∞·ª£ng ƒë∆∞·ª£c public

### Publish Process:

1. **Create/Generate Recipe** ‚Üí Saved as PRIVATE in `myRecipes`
2. **Review** ‚Üí User c√≥ th·ªÉ edit, test recipe
3. **Ready to share?** ‚Üí Click "üåü Xu·∫•t b·∫£n c√¥ng th·ª©c" button
4. **Published!** ‚Üí Recipe added to `recipes` collection
5. **Visible to everyone** ‚Üí Appears on HomePage

**Note:** Sau khi publish, recipe v·∫´n c√≥ th·ªÉ edit/delete. M·ªçi thay ƒë·ªïi s·∫Ω sync across all collections.

## üîÑ Data Synchronization

H·ªá th·ªëng t·ª± ƒë·ªông ƒë·ªìng b·ªô d·ªØ li·ªáu gi·ªØa c√°c m√†n h√¨nh v√† collections:

### Auto-Reload Mechanism

- S·ª≠ d·ª•ng `useFocusEffect` ƒë·ªÉ reload data khi m√†n h√¨nh ƒë∆∞·ª£c focus
- `RecipeDetail` t·ª± ƒë·ªông fetch recipe m·ªõi nh·∫•t t·ª´ API
- `HomePage` v√† `CookbookPage` t·ª± ƒë·ªông refresh khi quay l·∫°i

### Multi-Collection Sync

Khi edit/delete recipe, h·ªá th·ªëng t·ª± ƒë·ªông c·∫≠p nh·∫≠t/x√≥a kh·ªèi t·∫•t c·∫£ collections:

- ‚úÖ `myRecipes` - C√¥ng th·ª©c do user t·∫°o
- ‚úÖ `recipes` - T·ªïng h·ª£p t·∫•t c·∫£ c√¥ng th·ª©c (bao g·ªìm AI-generated)
- ‚úÖ `savedRecipes` - C√¥ng th·ª©c ƒë√£ l∆∞u

### Smart Data Flow

```
Edit Recipe:
  ‚Üí Update myRecipes
  ‚Üí Check & Update recipes (n·∫øu t·ªìn t·∫°i)
  ‚Üí Check & Update savedRecipes (n·∫øu t·ªìn t·∫°i)

Delete Recipe:
  ‚Üí Remove from myRecipes
  ‚Üí Remove from recipes (n·∫øu t·ªìn t·∫°i)
  ‚Üí Remove from savedRecipes (n·∫øu t·ªìn t·∫°i)

View Recipe:
  ‚Üí Fetch from myRecipes first
  ‚Üí Then recipes
  ‚Üí Then savedRecipes
```

**L·ª£i √≠ch:**

- üìå Kh√¥ng c√≥ data inconsistency
- üîÑ Lu√¥n hi·ªÉn th·ªã data m·ªõi nh·∫•t
- ‚ú® UX m∆∞·ª£t m√†, kh√¥ng c·∫ßn reload th·ªß c√¥ng
- üöÄ Auto-refresh khi quay l·∫°i m√†n h√¨nh

## üìÅ C·∫•u tr√∫c th∆∞ m·ª•c

```
CookBook-App/
‚îú‚îÄ‚îÄ pages/                      # C√°c m√†n h√¨nh
‚îÇ   ‚îú‚îÄ‚îÄ Start.js               # M√†n h√¨nh kh·ªüi ƒë·ªông
‚îÇ   ‚îú‚îÄ‚îÄ Login.js               # ƒêƒÉng nh·∫≠p (c√≥ m√£ h√≥a)
‚îÇ   ‚îú‚îÄ‚îÄ Signup.js              # ƒêƒÉng k√Ω (c√≥ m√£ h√≥a)
‚îÇ   ‚îú‚îÄ‚îÄ ForgotPassword.js      # Qu√™n m·∫≠t kh·∫©u
‚îÇ   ‚îú‚îÄ‚îÄ EditProfile.js         # Ch·ªânh s·ª≠a profile
‚îÇ   ‚îú‚îÄ‚îÄ ChangePassword.js      # ƒê·ªïi m·∫≠t kh·∫©u
‚îÇ   ‚îú‚îÄ‚îÄ ProfilePage.js         # Trang profile
‚îÇ   ‚îú‚îÄ‚îÄ HomePage.js            # Trang ch·ªß
‚îÇ   ‚îú‚îÄ‚îÄ ExplorePage.js         # Kh√°m ph√°
‚îÇ   ‚îú‚îÄ‚îÄ CookbookPage.js        # C√¥ng th·ª©c ƒë√£ l∆∞u
‚îÇ   ‚îú‚îÄ‚îÄ RecipeDetail.js        # Chi ti·∫øt c√¥ng th·ª©c
‚îÇ   ‚îú‚îÄ‚îÄ RecipeByCategory.js    # L·ªçc theo danh m·ª•c
‚îÇ   ‚îú‚îÄ‚îÄ CreateRecipe.js        # T·∫°o c√¥ng th·ª©c m·ªõi
‚îÇ   ‚îî‚îÄ‚îÄ AIRecipeGenerator.js   # T·∫°o c√¥ng th·ª©c b·∫±ng AI
‚îú‚îÄ‚îÄ navigation/                 # Navigation
‚îÇ   ‚îî‚îÄ‚îÄ MainTabNavigator.js    # Bottom tab navigator
‚îú‚îÄ‚îÄ services/                   # Services
‚îÇ   ‚îú‚îÄ‚îÄ api.js                 # API configuration
‚îÇ   ‚îú‚îÄ‚îÄ geminiService.js       # Gemini AI service
‚îÇ   ‚îî‚îÄ‚îÄ pexelsService.js       # Pexels image service
‚îú‚îÄ‚îÄ utils/                      # Utilities
‚îÇ   ‚îî‚îÄ‚îÄ encryption.js          # M√£ h√≥a & validation
‚îú‚îÄ‚îÄ assets/                     # H√¨nh ·∫£nh, icons
‚îú‚îÄ‚îÄ App.js                      # Main app component
‚îú‚îÄ‚îÄ database.json              # JSON database
‚îú‚îÄ‚îÄ .env                       # Environment variables
‚îú‚îÄ‚îÄ package.json               # Dependencies
‚îî‚îÄ‚îÄ README.md                  # T√†i li·ªáu n√†y
```

## üîí B·∫£o m·∫≠t

### M√£ h√≥a m·∫≠t kh·∫©u

- T·∫•t c·∫£ m·∫≠t kh·∫©u ƒë∆∞·ª£c m√£ h√≥a b·∫±ng SHA256 tr∆∞·ªõc khi l∆∞u
- Kh√¥ng l∆∞u tr·ªØ m·∫≠t kh·∫©u d·∫°ng plain text
- H·ªó tr·ª£ backward compatibility v·ªõi t√†i kho·∫£n c≈©

### Validation

- Email: Ki·ªÉm tra format h·ª£p l·ªá
- M·∫≠t kh·∫©u: T·ªëi thi·ªÉu 6 k√Ω t·ª±, ph·∫£i c√≥ ch·ªØ v√† s·ªë
- T√™n: T·ªëi thi·ªÉu 2 k√Ω t·ª±

### API Keys

- L∆∞u tr·ªØ trong file `.env` (ƒë√£ ƒë∆∞·ª£c gitignore)
- Kh√¥ng commit API keys l√™n repository
- S·ª≠ d·ª•ng environment variables

## üéØ S·ª≠ d·ª•ng

### ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi

1. M·ªü app v√† ch·ªçn "ƒêƒÉng k√Ω"
2. Nh·∫≠p h·ªç t√™n, email, m·∫≠t kh·∫©u
3. M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±, bao g·ªìm ch·ªØ v√† s·ªë
4. Nh·∫•n "ƒêƒÉng k√Ω"

### ƒêƒÉng nh·∫≠p

1. Nh·∫≠p email v√† m·∫≠t kh·∫©u
2. Nh·∫•n "ƒêƒÉng nh·∫≠p"
3. Ho·∫∑c ch·ªçn "Qu√™n m·∫≠t kh·∫©u?" n·∫øu c·∫ßn reset

### Ch·ªânh s·ª≠a profile

1. V√†o tab "Profile"
2. Nh·∫•n v√†o avatar ho·∫∑c ch·ªçn "Ch·ªânh s·ª≠a h·ªì s∆°"
3. Upload ·∫£nh ƒë·∫°i di·ªán t·ª´ th∆∞ vi·ªán ho·∫∑c camera
4. C·∫≠p nh·∫≠t t√™n, email
5. L∆∞u thay ƒë·ªïi

### ƒê·ªïi m·∫≠t kh·∫©u

1. V√†o "Profile" > "ƒê·ªïi m·∫≠t kh·∫©u"
2. Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i
3. Nh·∫≠p m·∫≠t kh·∫©u m·ªõi
4. X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi
5. L∆∞u

### T·∫°o c√¥ng th·ª©c b·∫±ng AI

1. V√†o tab "Home" > Nh·∫•n n√∫t AI
2. Nh·∫≠p nguy√™n li·ªáu c√≥ s·∫µn (c√°ch nhau b·ªüi d·∫•u ph·∫©y)
3. Ch·ªçn lo·∫°i m√≥n, s·ªë ng∆∞·ªùi, calories, th·ªùi gian
4. Nh·∫•n "T·∫°o c√¥ng th·ª©c"
5. ƒê·ª£i AI generate (kho·∫£ng 5-10 gi√¢y)
6. L∆∞u c√¥ng th·ª©c n·∫øu th√≠ch

### Ch·ªânh s·ª≠a c√¥ng th·ª©c

**C√°ch 1: T·ª´ RecipeDetail**

1. M·ªü c√¥ng th·ª©c c·ªßa b·∫°n (My Recipe)
2. Nh·∫•n n√∫t "Edit" (icon b√∫t) ·ªü g√≥c tr√™n b√™n ph·∫£i
3. Ch·ªânh s·ª≠a th√¥ng tin
4. Nh·∫•n "C·∫≠p nh·∫≠t c√¥ng th·ª©c"

**C√°ch 2: T·ª´ Cookbook**

1. V√†o tab "Cookbook" > "My Recipe"
2. Long press (gi·ªØ l√¢u) v√†o c√¥ng th·ª©c
3. Ch·ªçn "Ch·ªânh s·ª≠a"
4. C·∫≠p nh·∫≠t v√† l∆∞u

### X√≥a c√¥ng th·ª©c

**C√°ch 1: T·ª´ RecipeDetail**

1. M·ªü c√¥ng th·ª©c c·ªßa b·∫°n
2. Nh·∫•n n√∫t "Delete" (icon th√πng r√°c) m√†u ƒë·ªè
3. X√°c nh·∫≠n x√≥a

**C√°ch 2: T·ª´ Cookbook**

1. V√†o "Cookbook" > "My Recipe"
2. Long press v√†o c√¥ng th·ª©c
3. Ch·ªçn "X√≥a"
4. X√°c nh·∫≠n

## üõ†Ô∏è Scripts

```bash
# Ch·∫°y app
npm start

# Ch·∫°y JSON server
npm run server

# Ch·∫°y c·∫£ app v√† server (song song)
npm run dev

# Ch·∫°y tr√™n Android
npm run android

# Ch·∫°y tr√™n iOS
npm run ios
```

## üì¶ Dependencies ch√≠nh

- `react-native`: Framework
- `expo`: Development platform
- `@react-navigation`: Navigation
- `crypto-js`: M√£ h√≥a m·∫≠t kh·∫©u
- `@google/genai`: Google Gemini AI
- `expo-image-picker`: Upload h√¨nh ·∫£nh
- `@react-native-async-storage`: Local storage
- `react-native-vector-icons`: Icons
- `json-server`: Mock database

## üêõ Troubleshooting

### JSON Server kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c

- Ki·ªÉm tra xem JSON server c√≥ ƒëang ch·∫°y kh√¥ng: `npm run server`
- Ki·ªÉm tra localtunnel c√≥ ƒëang ho·∫°t ƒë·ªông kh√¥ng: truy c·∫≠p https://cookbook-app.loca.lt
- N·∫øu c·∫ßn, ch·∫°y l·∫°i localtunnel: `npm run lt`
- ƒê·∫£m b·∫£o `API_URL` trong `.env` kh·ªõp v·ªõi URL localtunnel c·ªßa b·∫°n

### AI Recipe Generator kh√¥ng ho·∫°t ƒë·ªông

- Ki·ªÉm tra `GEMINI_API_KEY` trong `.env` c√≥ ƒë√∫ng kh√¥ng
- Ki·ªÉm tra k·∫øt n·ªëi internet
- Ki·ªÉm tra console log ƒë·ªÉ xem error message

### H√¨nh ·∫£nh kh√¥ng load

- Ki·ªÉm tra `PEXELS_API_KEY` trong `.env`
- Ki·ªÉm tra k·∫øt n·ªëi internet

### App crash khi upload ·∫£nh

- C·∫•p quy·ªÅn truy c·∫≠p camera/th∆∞ vi·ªán cho app
- Ki·ªÉm tra thi·∫øt b·ªã c√≥ ƒë·ªß dung l∆∞·ª£ng kh√¥ng

## üìù TODO

- [x] **Th√™m ch·ª©c nƒÉng edit/delete recipe** ‚úÖ
- [x] **Private/Public Recipe System** ‚úÖ
- [ ] Th√™m rating & reviews
- [ ] Shopping list t·ª´ ingredients
- [ ] Meal planning
- [ ] Dark mode
- [ ] Offline mode
- [ ] Push notifications
- [ ] Export recipe to PDF
- [ ] Share recipe via social media
- [ ] User profile page v·ªõi published recipes count
- [ ] Trending/Popular recipes section

## üë®‚Äçüíª Ph√°t tri·ªÉn

```bash
# Clear cache
npx expo start -c

# Reset metro bundler
npx react-native start --reset-cache
```

## üìÑ License

MIT License

## ü§ù ƒê√≥ng g√≥p

Contributions, issues v√† feature requests ƒë·ªÅu ƒë∆∞·ª£c welcome!

---

Made with ‚ù§Ô∏è using React Native & Expo
